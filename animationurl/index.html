<html>
  <head>
    <style>
      body{
        width: 700px;
        height: 700px;
        margin: 0;
        display: flex;
        flex-wrap: wrap;
      }
    </style>

  </head>

  <body id="body">
  </body>

  <script>
    const fetchNFTs = async (address) => {
      const endpoint = `https://eth-mainnet.g.alchemy.com/nft/v2/0Twh_EqKMnOiFfUG1tDmGvU8zocwjGWe/getNFTs`
      const res = await fetch(`${endpoint}?owner=${address}`)
      if(res.ok){
        const json = await res.json()
        return {totalCount: json.totalCount, ownedNfts: json.ownedNfts}
      }
      return {totalCount: 0, ownedNfts: []}
    }
    const createImageElement = async () => {
      const params = new URLSearchParams(location.search)
      const address = params.get("nft-owner")

      const body = document.getElementById("body")

      const data = await fetchNFTs("0x6b4b4d3f568bc25831f3bB4ff5675fC65fB09B2d")

      data.ownedNfts.map((nft) => {
        const img = document.createElement("img")
        const imageUrl = nft.metadata?.image
        if(!imageUrl) return
        img.src = imageUrl?.replace("ar:/", "https://arweave.net").replace("ipfs:/", "https://ipfs.io/ipfs")
        img.width = 100
        img.height = 100
        body.appendChild(img)
      })
    }
    createImageElement()
  </script>
</html>